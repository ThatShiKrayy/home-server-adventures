services:
  whoami:
    container_name: whoami
    depends_on:
    - traefik
    environment:
    - TZ=$TZ
    - DOMAINNAME_1
    image: traefik/whoami:latest
    labels:
    - "traefik.enable=true"
    - "traefik.http.routers.whoami-rtr.entrypoints=websecure"
    - "traefik.http.routers.whoami-rtr.rule=Host(`whoami.$DOMAINNAME_1`)"
    # Middlewares
    - "traefik.http.routers.whoami-rtr.middlewares=chain-no-auth@file"
    # - "traefik.http.routers.whoami-rtr.middlewares=crowdsec@docker"
    # HTTP Services
    - "traefik.http.routers.whoami-rtr.service=whoami-svc"
    - "traefik.http.services.whoami-svc.loadbalancer.server.port=80"
    networks:
    - t3_proxy
    restart: unless-stopped
    security_opt:
    - no-new-privileges=true
